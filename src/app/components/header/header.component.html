<header>
  <tui-app-bar style="justify-content: space-between; background-color: var(--tui-status-positive); block-size: 2.4rem">
    <a class="header-logo" tuiSlot="left">
      <tui-icon icon="@tui.watch" />
      <span class="toolbar-title">KS Web Scraper</span>
    </a>

    <div tuiSlot="right" style="display: flex; align-items: center; gap: 12px; padding-right: 10px">
      <div tuiHint="Växla tema" class="header-icon icon-wrapper pointer">
        <tui-icon
          [icon]="themeIcon()"
          [class]="themeIcon() === 'moon' ? 'moon-icon' : 'sun-icon'"
          (click)="toggleTheme()"
          (keyup)="toggleTheme()" />
      </div>

      <div>
        @if (apiStatus().status === "active") {
          <div class="header-icon icon-wrapper pointer">
            <tui-icon icon="circle-check" (click)="openApiStatusDialog()" />
          </div>
        }

        @if (apiStatus().status === "pending") {
          <div class="header-icon icon-wrapper" style="cursor: wait" tuiHint="Väntar på API:et">
            <tui-icon icon="loader" class="loading-icon-spinner" (click)="openApiStatusDialog()" />
          </div>
        }

        @if (apiStatus().status === "inactive") {
          <div class="header-icon icon-wrapper" style="cursor: not-allowed" tuiHint="API:et är inte aktivt">
            <tui-icon icon="circle-x" style="color: var(--tui-text-negative)" />
          </div>
        }
      </div>

      <div class="header-icon icon-wrapper pointer">
        <tui-icon icon="user" tuiDropdownOpen tuiDropdownAlign="right" [tuiDropdown]="dropdown" />

        <ng-template #dropdown>
          <tui-data-list>
            <tui-opt-group>
              <!--TODO: Registrera och logga in ska endast visas när man inte är inloggad -->
              <button tuiOption type="button" class="item" (click)="handleNewUserClick()" (keyup)="handleNewUserClick()">
                Registrera användare
              </button>

              <button tuiOption type="button" class="item" (click)="handleUserLoginClick()" (keyup)="handleUserLoginClick()">
                Logga in
              </button>

              <!--TODO: Den här ska bara visas om användaren är inloggad -->
              <button tuiOption type="button" class="item" (click)="handleLogoutClick()" (keyup)="handleLogoutClick()">
                Logga ut
              </button>
            </tui-opt-group>
          </tui-data-list>
        </ng-template>
      </div>
    </div>
  </tui-app-bar>
</header>
