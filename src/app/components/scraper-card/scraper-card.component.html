@if (newWatchLoading()) {
  <div>
    {{ this.progressBarService.show() }}
  </div>
} @else {
  {{ this.progressBarService.hide() }}
}

<div class="card-container">
  @for (watch of watches(); track watch.id) {
    <!-- TODO: Använd "vanlig" breakpoint istället -->
    <mat-card appearance="outlined" class="card" [ngClass]="isHandset() ? 'full-card-width' : 'small-card-width'">
      <mat-card-title>
        <strong>{{ watch.label }}</strong>
      </mat-card-title>
      <mat-card-content class="card-mat-card-content">
        <p>
          <strong> Last email sent: </strong>
          {{ watch.lastEmailSent === null ? "No email sent" : (watch.lastEmailSent | date: cardDateFormat) }}
        </p>
        <p>
          <strong>Added: </strong>
          {{ watch.added | date: cardDateFormat }}
        </p>
        <p>
          <strong>Current watch: </strong>
          <!-- Visa endast den sensate klockan, därav index 0 -->
          <a target="_blank" class="link" [href]="watch.watches[0].link">{{ watch.watches[0].name }}</a>
        </p>
      </mat-card-content>
      <scraper-card-actions [watch]="watch"></scraper-card-actions>
    </mat-card>
  } @empty {
    <div class="no-active-scraped-watches">Inga aktiva bevakningar.</div>
  }

  <div class="fab-small-screen-new-watch-button custom-tooltip" matTooltip="Add new watch" matTooltipPosition="left">
    <button mat-fab color="primary" (click)="openNewWatchDialog()">
      <mat-icon class="small-add-watch-icon">add</mat-icon>
    </button>
  </div>
</div>
