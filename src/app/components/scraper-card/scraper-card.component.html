<div class="card-container">
  <mat-card
    class="card"
    *ngFor="let watch of watches; index as i"
    [ngClass]="cardWidth">
    <mat-card-title
      ><strong>{{ watch.label }}</strong></mat-card-title
    >
    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header class="card-mat-expansion-panel-header">
          <mat-panel-title>Details</mat-panel-title>
        </mat-expansion-panel-header>
        <mat-card-content class="card-mat-card-content">
          <p>
            <strong>Thread being scraped: </strong>
            <a target="_blank" class="link" href="{{ watch.link }}">Thread</a>
          </p>
          <p>
            <strong> Last mail sent: </strong>
            {{
              watch.last_email_sent === ''
                ? 'No email sent'
                : watch.last_email_sent
            }}
          </p>
          <p><strong>Added: </strong> {{ watch.added }}</p>
          <p>
            <strong>Current watch: </strong>
            <a target="_blank" class="link" href="{{ watch.watches.link }}">{{
              watch.watches.name
            }}</a>
          </p>
        </mat-card-content>
      </mat-expansion-panel>
    </mat-accordion>

    <mat-card-actions align="end" class="watch-card-actions">
      <button
        mat-icon-button
        class="deleteCardButton"
        (click)="deleteWatchDialog(watch, i)">
        <mat-icon
          class="delete-icon"
          matTooltip="Delete watch"
          matTooltipPosition="above"
          >delete_outline</mat-icon
        >
      </button>
      <button mat-icon-button>
        <mat-icon
          fontSet="material-icons-outlined"
          color="primary"
          matTooltip="View statistics"
          matTooltipPosition="above"
          >assessment</mat-icon
        >
      </button>
      <mat-slide-toggle
        class="is-watch-active-slide-toggle"
        color="primary"
        matTooltip="Toggle active status"
        matTooltipPosition="above"
        [checked]="watch.active"
        (change)="
          toggleActiveStatus(
            { isActive: watch.active, label: watch.label, id: watch.id },
            i,
            $event
          )
        ">
      </mat-slide-toggle>
    </mat-card-actions>
  </mat-card>
  <div
    *ngIf="smallAddNewWatchButtonSize; else showLargeAddNewWatchButton"
    class="small-new-watch-container">
    <button mat-fab color="primary" (click)="openNewWatchDialog()">
      <mat-icon class="small-add-watch-icon">add</mat-icon>
    </button>
  </div>

  <ng-template #showLargeAddNewWatchButton>
    <div class="large-new-watch-container">
      <button
        mat-raised-button
        color="primary"
        (click)="openNewWatchDialog()"
        class="new-watch-button">
        <mat-icon class="large-add-watch-icon">add_circle</mat-icon>
        Add watch
      </button>
    </div>
  </ng-template>
</div>
